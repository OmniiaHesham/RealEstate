name: Open Dev Site with VPN

on:
  push:
    branches:
      - Test

jobs:
  vpn:
    runs-on: ubuntu-latest
  
    steps:
      - name: Checkout Code
        uses: actions/checkout@v2

      - name: Check curl version
        run: curl --version
       
      - name: Prepare VPN Config file
        run: |
         echo "VPN Config Test: " &&
         echo $vpn_creds &&
         echo $vpn_creds  >> /tmp/vpn_client.config





  build:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Set Node.js
        uses: actions/setup-node@v2
        with:
          node-version: 14

      - name: Install dependencies
        run: npm ci

      - name: Run Cypress tests
        run: npm run cypress:run